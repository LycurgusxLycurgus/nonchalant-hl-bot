{% extends "layouts/base.html" %}

{% block content %}
  <section class="overview-hero ui-card ui-card--surface" tabindex="0">
    <div class="overview-hero__body">
      <span class="overview-hero__eyebrow">Nonchalant control center</span>
      <h1 class="overview-hero__title">Launch automated trading runs in seconds</h1>
      <p class="overview-hero__copy">
        Connect your agent wallet, pick a market, and set the position size. Nonchalant Bot executes instantly
        on Hyperliquid while guardrails, monitoring, and audit history keep every run accountable.
      </p>
      <div class="overview-hero__metrics">
        <div class="overview-hero__metric">
          <span class="overview-hero__metric-label">Active runs</span>
          <span class="overview-hero__metric-value">{{ start_overview.active_runs }}</span>
        </div>
        <div class="overview-hero__metric">
          <span class="overview-hero__metric-label">Runs launched</span>
          <span class="overview-hero__metric-value">{{ start_overview.total_runs }}</span>
        </div>
        <div class="overview-hero__metric">
          <span class="overview-hero__metric-label">Start success rate</span>
          {% set attempts = start_overview.metrics.get('bot.start.attempt', 0) %}
          {% set successes = start_overview.metrics.get('bot.start.success', 0) %}
          {% if attempts %}
            {% set pct = (successes / attempts * 100) | round(1) %}
            <span class="overview-hero__metric-value">{{ pct }}%</span>
          {% else %}
            <span class="overview-hero__metric-value">—</span>
          {% endif %}
        </div>
      </div>
    </div>
    <div class="overview-hero__visual" aria-hidden="true">
      <div class="overview-hero__orb"></div>
      <div class="overview-hero__orb overview-hero__orb--alt"></div>
    </div>
  </section>

  <section class="overview-layout">
    <div class="overview-layout__primary">
      {% include "trading/_start_panel.html" %}
    </div>
    <aside class="overview-layout__secondary ui-card ui-card--surface" aria-labelledby="launch-checklist-heading">
      <header class="ui-card__header">
        <div class="ui-card__header-left">
          <h2 id="launch-checklist-heading" class="ui-card__title">Launch steps</h2>
        </div>
        <span class="ui-card__header-right">Checklist</span>
      </header>
      <ol class="launch-checklist">
        <li>
          <strong>Connect wallet</strong>
          <span>Authorize your Hyperliquid wallet from the top toolbar to unlock agent controls.</span>
        </li>
        <li>
          <strong>Select market</strong>
          <span>Pick the perp you want to trade and confirm the leverage you plan to use.</span>
        </li>
        <li>
          <strong>Review position size</strong>
          <span>Enter the USDC size and run duration that fit your risk plan.</span>
        </li>
        <li>
          <strong>Launch run</strong>
          <span>Start the bot. Monitoring updates in realtime and alerts keep you informed.</span>
        </li>
      </ol>
    </aside>
  </section>

  <section class="overview-status" aria-live="polite">
    <span class="overview-status__prompt">$</span>
    <span class="overview-status__text">
      Status: Healthy · Agent wallets {{ start_overview.agent_count }} · Monitor stream live · HL env {{ hl_env|upper }}
    </span>
  </section>
{% endblock %}
