{% extends "layouts/base.html" %}

{% block title %}Deposit funds — Nonchalant Bot{% endblock %}

{% block content %}
  <section class="deposit-hero ui-card ui-card--surface">
    <div class="deposit-hero__body">
      <span class="deposit-hero__eyebrow">Deposit · Bridge funds</span>
      <h1 class="deposit-hero__title">Move USDC to Hyperliquid in four guided steps</h1>
      <p class="deposit-hero__copy">
        Use your primary L1 wallet to bridge into Hyperliquid. Once the transfer settles, Nonchalant Bot can
        execute instantly with your agent wallet while every move stays tracked and auditable.
      </p>
      <div class="deposit-hero__ctas">
        <a class="ui-button ui-button--primary" href="https://app.hyperliquid.xyz/bridge" target="_blank" rel="noopener">
          Open Hyperliquid Bridge
        </a>
        <a class="ui-button ui-button--secondary" href="https://hyperliquid.gitbook.io/hyperliquid-docs" target="_blank" rel="noopener">
          Read deposit docs
        </a>
      </div>
    </div>
    <div class="deposit-hero__visual" aria-hidden="true">
      <div class="deposit-glow"></div>
      <div class="deposit-glow deposit-glow--secondary"></div>
    </div>
  </section>

  <section class="deposit-layout">
    <article class="ui-card ui-card--surface deposit-steps" aria-labelledby="deposit-steps-heading">
      <header class="ui-card__header">
        <div class="ui-card__header-left">
          <h2 id="deposit-steps-heading" class="ui-card__title">Bridge flow</h2>
        </div>
        <span class="ui-card__header-right">Checklist</span>
      </header>
      <ol class="deposit-steps__list">
        <li>
          <strong>Prepare wallet</strong> — Connect your L1 wallet (MetaMask or WalletConnect) and confirm you hold USDC on Arbitrum.
        </li>
        <li>
          <strong>Initiate deposit</strong> — Open the Hyperliquid Bridge, choose <em>Arbitrum → Hyperliquid</em>, enter the USDC amount, and submit.
        </li>
        <li>
          <strong>Wait for confirmation</strong> — Keep the bridge tab open until it reports success. Most transfers clear within a few minutes.
        </li>
        <li>
          <strong>Refresh balance</strong> — Return here and refresh the balance panel. Your USDC should appear once the bridge settles.
        </li>
      </ol>
      <div class="deposit-alert">
        <span class="deposit-alert__icon" aria-hidden="true">⚠️</span>
        <p class="deposit-alert__copy">
          Agent wallets trade and move funds internally but cannot withdraw on-chain. Use your primary wallet for any bridge back to L1.
        </p>
      </div>
    </article>

    <aside class="deposit-balance ui-card" aria-live="polite" aria-busy="false">
      <header class="deposit-balance__header">
        <div>
          <span class="ui-card__kicker">Hyperliquid balance</span>
          <h2 class="ui-card__title">USDC holdings</h2>
        </div>
        <button
          class="ui-button ui-button--secondary"
          hx-get="/deposit/partial/balance"
          hx-target="#balance-panel"
          hx-trigger="click"
          hx-indicator="#balance-loading"
        >
          Refresh
        </button>
      </header>
      <div id="balance-panel" hx-get="/deposit/partial/balance" hx-trigger="load, every 10s" hx-indicator="#balance-loading">
        {% include "deposit/_balance_panel.html" %}
      </div>
      <div id="balance-loading" class="deposit-loading" aria-hidden="true">Updating…</div>
      <footer class="deposit-balance__footer">
        <p>Polling Hyperliquid Info endpoint every 10 seconds. Balances show the latest confirmed bridge credit in USDC.</p>
      </footer>
    </aside>
  </section>
{% endblock %}
